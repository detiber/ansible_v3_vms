#! ansible-playbook -K
---
- name: Bootstrap the base image
  hosts: localhost
  connection: local
  become: yes
  vars:
    kvm_snapshot_cluster_id: test
    kvm_snapshot_cluster_bridge: virbr1
    kvm_snapshot_cluster_cidr: 192.168.144.0/24
    kvm_snapshot_cluster_parent_domain: example.com
  roles:
  - kvm_snapshot_cluster

- hosts: all
  tasks:
  - yum_repository:
      name: rhel7-base
      baseurl: http://pulp.dist.prod.ext.phx2.redhat.com/content/dist/rhel/power-le/7/7Server/
      gpgcheck: no

  - yum_repository:
      name: rhel7-base
      baseurl: http://download.eng.bos.redhat.com/nightly/RHEL-7.4-20170607.n.0/compose/Server/ppc64le/os
      gpgcheck: no

  - yum_repository:
      name: rhel7-extras
      baseurl: http://download-node-02.eng.bos.redhat.com/devel/candidate-trees/EXTRAS-7.4-RHEL-7-20170526.0/compose/Server/ppc64le/os/
      gpgcheck: no


- include: /tmp/openshift-ansible/playbooks/byo/openshift-cluster/config.yml
  vars:
    openshift_deployment_type: openshift-enterprise
    openshift_additional_repos:
    - id: rhaos-multiarch
      name: rhaos-multiarch
      baseurl: http://download-node-02.eng.bos.redhat.com/brewroot/repos/rhaos-3.5-rhel-7-newarches-build/latest/ppc64le/
      gpgcheck: 0
      enabled: 1
